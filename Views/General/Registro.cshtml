@using EduConnect_Front.Dtos
@model EduConnect_Front.Dtos.CrearUsuarioDto
@{
    ViewData["Title"] = "Registro";
    Layout = "_Layout";
    var carreras = ViewBag.Carreras as List<CarreraDto>;
    var tipoIdent = ViewBag.TipoIdent as List<TipoIdentDto>;
}
@section Styles {
    <link rel="stylesheet" href="~/estilos/registro.css" />

}

<main>
    <section class="left">
        <img src="~/img/Registro.png" alt="Estudiante">
    </section>

    <section class="right">
        <h1 class="visually-hidden">@ViewData["Title"]</h1>

        <form asp-action="Registro" asp-controller="General" method="post">
            @Html.AntiForgeryToken()
            

            <input asp-for="Nombre" type="text" placeholder="NOMBRES" required />
            <input asp-for="Apellido" type="text" placeholder="APELLIDOS" required />

            @* TIPOS DE DOCUMENTO -> Usa IDs numéricos que entienda tu API *@
            
                <select asp-for="IdTipoIdent" required>

                    <option value="">TIPO DE DOCUMENTO</option>
                    @if (tipoIdent != null)
                    {
                        foreach (var t in tipoIdent)
                        {
                            <option value="@t.IdTipoIdent">@t.Nombre</option>
                        }
                    }
                </select>
            

            <input asp-for="NumIdent" type="text" placeholder="NÚMERO DE DOCUMENTO" required />
            <input asp-for="TelUsu" type="tel" placeholder="TELÉFONO" required />
            <input asp-for="Correo" type="email" placeholder="CORREO" required />

            @* CARRERA: si es ID, usa number o un <select> si ya tienes catálogo *@
            <select asp-for="IdCarrera" required>
                <option value="">CARRERA</option>
                @if (carreras != null)
                {
                    foreach (var c in carreras)
                    {
                        <option value="@c.IdCarrera">@c.NombreCarrera</option>
                    }
                }
            </select>

            <select asp-for="IdSemestre" required>
                <option value="">SEMESTRE</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
            </select>

            <input asp-for="ContrasUsu" type="password" placeholder="CONTRASEÑA" required />

            <p class="radio-label">¿CÓMO QUIERES PARTICIPAR CON NOSOTROS?</p>
            @* Mapea a IdRol (número). Ajusta valores según tu BD *@
            <label>
                <input type="radio" name="IdRol" value="2" required />
                Quiero Enseñar (Tutor)
            </label>
            <label>
                <input type="radio" name="IdRol" value="1" class="radio-opcion" />
                Quiero Aprender (Tutorado)
            </label>

            <input type="hidden" asp-for="IdEstado" value="1" />

            <button type="submit">GUARDAR</button>
        </form>
    </section>
</main>
@await Html.PartialAsync("_Popup", new EduConnect_Front.Dtos.PopupDto {
Tipo = "error",
    Titulo = "No se pudo registrar",
    Mensaje = ViewData.ModelState[string.Empty]?.Errors.FirstOrDefault()?.ErrorMessage
})
<script>
    // Validar que solo se ingresen números en ambos campos
    const numIdentInput = document.querySelector('input[name="NumIdent"]');
    const telInput = document.querySelector('input[name="TelUsu"]');

    function soloNumeros(input) {
        input.addEventListener('input', function () {
            this.value = this.value.replace(/[^0-9]/g, ''); // elimina todo lo que no sea número
        });
    }

    soloNumeros(numIdentInput);
    soloNumeros(telInput);
</script>