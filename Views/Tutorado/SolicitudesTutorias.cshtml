@model List<EduConnect_Front.Dtos.HistorialTutoriaDto>
@using EduConnect_Front.Dtos
@{
    ViewData["Title"] = "Solicitudes de Tutorías";
    Layout = "_Layout";
    var usuario = ViewBag.Usuario as ObtenerUsuarioDto;
}
@section Styles {
    <link rel="stylesheet" href="~/estilos/HistorialTutorias.css" />
}

<main class="historial historial2">


    <div class="cabecera cabecera2">
        <h1>SOLICITUDES DE TUTORÍAS</h1>
    </div>

    <section class="contenido">
        <div class="tabla-wrapper">
            <table class="tabla tabla2">
                <thead>
                    <tr>
                        <th>Nombre del tutor</th>
                        <th>Materia solicitada</th>
                        <th>Fecha propuesta</th>
                        <th>Hora Propuesta</th>
                        <th>Tema requerido</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var r in Model)
                        {
                            <tr>
                                <td>@r.TutorNombreCompleto</td>
                                <td>@r.MateriaNombre</td>
                                <td>@r.Fecha</td>
                                <td>@r.Hora</td>
                                <td>@r.Tema</td>
                                <td>@r.EstadoNombre</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6" style="text-align:center; padding:18px;">
                                No hay solicitudes registradas.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <a asp-controller="Tutorado" asp-action="PanelTutorado" class="btn-volver btn2">
               VOLVER
            </a>
        </div>

        <aside class="lateral">
            <div class="ilustracion">
                <img src="~/img/PensarSolicitud.png" alt="Usuario">
            </div>
            <div class="filtros tarjeta">
                <h3>FILTRAR POR:</h3>

                <label class="chk">
                    <input type="checkbox" value="pendiente" checked />
                    <span class="tick"></span>
                    PENDIENTE DE RESPUESTA
                </label>

                <label class="chk">
                    <input type="checkbox" value="aceptada" checked />
                    <span class="tick"></span>
                    ACEPTADA
                </label>

                <label class="chk">
                    <input type="checkbox" value="rechazada" />
                    <span class="tick"></span>
                    RECHAZADA
                </label>

                <button type="button" class="btn-aplicar btn-aplicar2">APLICAR FILTRO</button>
            </div>
        </aside>
    </section>

    <button class="btn-flotante" title="Soporte">
        <img src="~/img/chat-bubble.png" alt="Chat">
    </button>

    @* Popup de error si algo falló *@
    @{
        var error = ViewData.ModelState[string.Empty]?.Errors.FirstOrDefault()?.ErrorMessage;
    }
    @await Html.PartialAsync("_Popup", new EduConnect_Front.Dtos.PopupDto {
    Tipo = "error",
        Titulo = "No se pudo cargar el historial",
        Mensaje = error
        })
</main>
